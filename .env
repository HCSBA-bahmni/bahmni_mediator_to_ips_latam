###############################################
# RUNTIME / ENTORNO
###############################################
NODE_ENV=development   # development | production

###############################################
# CORS (un único lugar)
###############################################
CORS_ORIGIN=https://10.68.174.205,https://localhost

###############################################
# ENDPOINTS CORE / PROXIES / FORWARDERS
###############################################
# Proxy FHIR (usado por fhir-forwarder-mediator para leer desde el proxy)
FHIR_PROXY_URL=https://10.68.174.206:5000/proxy/fhir

# Nodo FHIR local (destino del forwarder)
FHIR_NODE_URL=http://10.68.174.222

# OpenMRS FHIR (fuente Bahmni → proxy)
OPENMRS_FHIR_URL=https://10.68.174.205/openmrs/ws/fhir2/R4
OPENMRS_USER=fhiruser
OPENMRS_PASS=Lopior.123,

# OpenHIM API (consola y registro de mediadores)
OPENHIM_API=https://10.68.174.206:8080
OPENHIM_API_URL=https://10.68.174.206:8080  # (alias opcional si algún mediador lo usa)
OPENHIM_USER=mediator-proxy@openhim.org
OPENHIM_PASS=Lopior.123

###############################################
# ATOM FEED (OpenMRS → feed-mediator)
###############################################
ATOM_FEED_URL=https://10.68.174.205/openmrs/ws/atomfeed/encounter/recent
FEED_POLL_INTERVAL=15  # segundos

###############################################
# PUERTOS LOCALES DE MEDIADORES
###############################################
FORWARDER_MEDIATOR_PORT=8003
LACPASS_ITI65_PORT=8005
PORT_PDQM=8007
PDQM_PORT=8007
FORWARDER_IMMUNIZATION_PORT=8009
PORT_TERMINO=8010

###############################################
# EVENTOS / ENDPOINTS EN OPENHIM
###############################################
OPENHIM_EVENT_ENDPOINT=https://10.68.174.206:5000/forwarder/_event
OPENHIM_ITI_ENDPOINT=https://10.68.174.206:5000/forwarder/_event
OPENHIM_SUMMARY_ENDPOINT=https://10.68.174.206:5000/lacpass/_iti65

###############################################
# ITI-65 (Nodo nacional de destino)
###############################################
SUMMARY_PROFILE=http://lacpass.racsel.org/StructureDefinition/lac-composition-ddcc
FHIR_NODO_NACIONAL_SERVER=http://10.68.174.221:8080/fhir

###############################################
# PDQm (Patient Demographics)
###############################################
# Simulador/servidor PDQm
PDQM_FHIR_URL=https://gazelle.racsel.org/pdqm-fhir-simulator/IHE/fhir
# Token (si upstream requiere Auth Bearer)
PDQM_FHIR_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJnVmd6VWtRZEtwZHVMbmF4bThKQy1JYTh0VUdNV0J1TTJZT2R3akthcEdzIn0.eyJleHAiOjE3MDgzNDg0ODUsImlhdCI6MTcwODM0ODE4NSwiYXV0aF90aW1lIjoxNzA4MzQ4MTQzLCJqdGkiOiI5OGZjZDFiNy0wZGE5LTRkZGQtODUwNy1hM2I1YmU3NmY0ZmIiLCJpc3MiOiJodHRwczovL2VoZWFsdGhzdWlzc2UuaWhlLWV1cm9wZS5uZXQvaXVhLXNzby9yZWFsbXMvY2gtaXVhIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImFjNGZkNjI2LWNiZGYtNGIzMC1hOTNhLTc0YTM2YWQyM2QwYiIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNoLWl1YS1jbGllbnQiLCJzZXNzaW9uX3N0YXRlIjoiYzUyMTE2NjItY2VhNy00ZmFmLWFkZjktNDNiNTE2MGNjYjUwIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIvKiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZGVmYXVsdC1yb2xlcy1jaC1pdWEiLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwdXJwb3NlX29mX3VzZT11cm46b2lkOjIuMTYuNzU2LjUuMzAuMS4xMjcuMy4xMC41fE5PUk0gcHJvZmlsZSBsYXVuY2ggZW1haWwiLCJzaWQiOiJjNTIxMTY2Mi1jZWE3LTRmYWYtYWRmOS00M2I1MTYwY2NiNTAiLCJleHRlbnNpb25zIjp7ImNoX2VwciI6eyJ1c2VyX2lkX3F1YWxpZmllciI6InVybjpnczE6Z2xuIiwidXNlcl9pZCI6Ijc2MDEwMDI0NjczNzMifSwiY2hfaXVhIjp7ImxhdW5jaCI6ImxhdW5jaCJ9LCJpaGVfaXVhIjp7InB1cnBvc2Vfb2ZfdXNlIjp7ImNvZGUiOiJOT1JNIiwic3lzdGVtIjoidXJuOm9pZDoyLjE2Ljc1Ni41LjMwLjEuMTI3LjMuMTAuNSJ9fX0sImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwibmFtZSI6InJyZXlub2xkcyBSZXlub2xkcyIsInByZWZlcnJlZF91c2VybmFtZSI6InJyZXlub2xkcyIsImdpdmVuX25hbWUiOiJycmV5bm9sZHMiLCJmYW1pbHlfbmFtZSI6IlJleW5vbGRzIn0.mT9ZTGNqTfsMBxoyGLaQlUr9PVcFItvlKmZxjY4_OAHqi4nE82S5n0mE4iy_5YL_sbYtNODI1L_LH6keBTCSbSOY5REkp_NLm4QLzdX4ynJ7Y_nMoD5H6TFqJTrllKVJ5IKtXhWv9bLQK35PLLPeNMZH4yl3ChlOlx0IH-zqHEPcOV69kN1vC7_Jjj0vx3d0RFvR_0sbfG3XnSiO3fpwwj2xYgRfZkfJqTuZ5404j9nu8TiPHtCRqQ_EPtEirUTG1ClX1DahJRKB-jwLHThxkKooUxsRAQZVhqayhLMV8sxwNkeHnNemhqreOkeDELxn2ZC-VOQLe9WRsX37QagO1g
PDQM_TIMEOUT_MS=10000

# Whitelist de parámetros permitidos (si implementas proxy PDQm propio)
PDQM_ALLOWED_SEARCH_PARAMS=identifier,name,family,given,birthdate,gender,telecom,address,address-city,address-postalcode,_count,_offset,_sort,_include,_revinclude
PDQM_IDENTIFIER_FALLBACK_PARAM_NAMES=id,_id
PDQM_DEFAULT_IDENTIFIER_SYSTEM=urn:oid:2.16.756.888801.3.4
PDQM_FALLBACK_HTTP_STATUSES=400,404,408,429,500,502,503
PDQM_ENABLE_FALLBACK_FOR_401_403=false
PDQM_ENABLE_ALIASES=true

# Encender/Apagar PDQm en el mediador
FEATURE_PDQ_ENABLED=true

###############################################
# TERMINOLOGY (Snowstorm FHIR / HAPI TS)
###############################################
# Base del servidor terminológico FHIR
TERMINOLOGY_BASE_URL=http://15.228.12.79:8180/fhir
TERMINO_SERVER_URL=http://15.228.12.79:8180/fhir   # alias alternativo
TS_TIMEOUT_MS=15000
TS_DISPLAY_LANGUAGE=es
TS_ACTIVE_ONLY=true

# Autenticación hacia el TS (elige UNO de los dos)
#TERMINO_BEARER_TOKEN=eyJhbGciOi...        # si usas Bearer
#TERMINO_BASIC_USER=usuario                # si usas Basic
#TERMINO_BASIC_PASS=clave

# Encender Terminology en el mediador
FEATURE_TS_ENABLED=true

# ====== Sólo VALIDATE-CODE por ahora ======
FEATURE_TS_VALIDATE_VS_ENABLED=true   # ValueSet/$validate-code (si hay VS_VALIDATE_URI)
FEATURE_TS_VALIDATE_CS_ENABLED=true   # CodeSystem/$validate-code
FEATURE_TS_EXPAND_ENABLED=false       # NO ValueSet/$expand
FEATURE_TS_TRANSLATE_ENABLED=false    # NO ConceptMap/$translate

# (Opcional) si añadiste guard en código para evitar lookup:
FEATURE_TS_LOOKUP_ENABLED=false       # NO CodeSystem/$lookup (requiere check en opLookup)

# (Opcional) si se añadio pipeline por dominio en código:
#TS_PIPELINE_ORDER_CONDITIONS=validate-vs,validate-cs
#TS_PIPELINE_ORDER_PROCEDURES=validate-vs,validate-cs
#TS_PIPELINE_ORDER_MEDICATIONS=validate-vs,validate-cs
#TS_PIPELINE_ORDER_VACCINES=validate-vs,validate-cs

# Dominios disponibles y default
TS_DOMAINS=conditions,procedures,medications,vaccines
TS_DEFAULT_DOMAIN=conditions

# Defaults globales para $translate (si un dominio no define; hoy NO se usan)
TS_TRANSLATE_DEFAULT_CONCEPTMAP_URL=
TS_TRANSLATE_DEFAULT_SOURCE_VS=
TS_TRANSLATE_DEFAULT_TARGET_VS=
TS_TRANSLATE_DEFAULT_SOURCE_SYSTEM=http://snomed.info/sct
TS_TRANSLATE_DEFAULT_TARGET_SYSTEM=http://hl7.org/fhir/sid/icd-10

# -------- CONDITIONS --------
# VS para validar (ECL: <<404684003 "Clinical finding")
CONDITIONS_VS_VALIDATE_URI=http://snomed.info/sct?fhir_vs=ecl/%3C%3C404684003
# CodeSystem preferido
CONDITIONS_CS_URI=http://snomed.info/sct
# (No usado ahora) VS para expand sugerencias
CONDITIONS_VS_EXPAND_URI=http://snomed.info/sct?fhir_vs=ecl/%3C%3C404684003
# (No usado ahora) translate
CONDITIONS_TRANSLATE_CONCEPTMAP_URL=
CONDITIONS_TRANSLATE_SOURCE_VS=http://snomed.info/sct?fhir_vs=ecl/%3C%3C404684003
CONDITIONS_TRANSLATE_TARGET_VS=
CONDITIONS_TRANSLATE_SOURCE_SYSTEM=http://snomed.info/sct
CONDITIONS_TRANSLATE_TARGET_SYSTEM=http://hl7.org/fhir/sid/icd-10

# -------- PROCEDURES --------
# VS para validar (ECL: <<71388002 "Procedure")
PROCEDURES_VS_VALIDATE_URI=http://snomed.info/sct?fhir_vs=ecl/%3C%3C71388002
PROCEDURES_CS_URI=http://snomed.info/sct
# (No usado ahora) expand
PROCEDURES_VS_EXPAND_URI=http://snomed.info/sct?fhir_vs=ecl/%3C%3C71388002
# (No usado ahora) translate
PROCEDURES_TRANSLATE_CONCEPTMAP_URL=
PROCEDURES_TRANSLATE_SOURCE_VS=http://snomed.info/sct?fhir_vs=ecl/%3C%3C71388002
PROCEDURES_TRANSLATE_TARGET_VS=
PROCEDURES_TRANSLATE_SOURCE_SYSTEM=http://snomed.info/sct
PROCEDURES_TRANSLATE_TARGET_SYSTEM=http://hl7.org/fhir/sid/icd-10-pcs

# -------- MEDICATIONS --------
# VS para validar (ECL: <<763158003 "Medicinal product")
MEDICATIONS_VS_VALIDATE_URI=http://snomed.info/sct?fhir_vs=ecl/%3C%3C763158003
MEDICATIONS_CS_URI=http://snomed.info/sct
# (No usado ahora) expand
MEDICATIONS_VS_EXPAND_URI=http://snomed.info/sct?fhir_vs=ecl/%3C%3C763158003
# (No usado ahora) translate
MEDICATIONS_TRANSLATE_CONCEPTMAP_URL=
MEDICATIONS_TRANSLATE_SOURCE_VS=http://snomed.info/sct?fhir_vs=ecl/%3C%3C763158003
MEDICATIONS_TRANSLATE_TARGET_VS=
MEDICATIONS_TRANSLATE_SOURCE_SYSTEM=http://snomed.info/sct
MEDICATIONS_TRANSLATE_TARGET_SYSTEM=http://www.whocc.no/atc

# -------- VACCINES --------
# Si no tienes VS de vacunas, usa sólo CS validate
VACCINES_VS_VALIDATE_URI=
VACCINES_CS_URI=http://snomed.info/sct
# (No usado ahora) expand y translate
VACCINES_VS_EXPAND_URI=
VACCINES_TRANSLATE_CONCEPTMAP_URL=
VACCINES_TRANSLATE_SOURCE_VS=
VACCINES_TRANSLATE_TARGET_VS=
VACCINES_TRANSLATE_SOURCE_SYSTEM=http://snomed.info/sct
VACCINES_TRANSLATE_TARGET_SYSTEM=http://hl7.org/fhir/sid/icd-10

###############################################
# VHL (Verifiable Health Links) — emisión/validación
###############################################
VHL_ISSUANCE_URL=http://10.68.174.221:8182/v2/vshcIssuance
VHL_VALIDATION_URL=http://10.68.174.221:8182/v2/vshcValidation
VHL_PORT=8008
VHL_PASSCODE=1234
VHL_EXPIRES_DAYS=30
VHL_RECIPIENT=LACPass Bahmni Client

###############################################
# METADATOS ORGANIZACIÓN (default)
###############################################
DEFAULT_ORG_ENABLED=true
DEFAULT_ORG_ID=hcsba
DEFAULT_ORG_NAME="Hospital Clínico San Borja Arriarán"
DEFAULT_ORG_RUT="61.608.604-9"
DEFAULT_ORG_URL="https://www.hcsba.cl/"
DEFAULT_ORG_PHONE="+56 2 25749000"
DEFAULT_ORG_ADDRESS_LINE="Avenida Santa Rosa 1234"
DEFAULT_ORG_CITY="Santiago"
DEFAULT_ORG_DISTRICT="Santiago Centro"
DEFAULT_ORG_STATE="Región Metropolitana"
DEFAULT_ORG_COUNTRY="CL"

###############################################
# (Opcional) fallback lectura OpenMRS adicional
###############################################
OPENMRS_USER="superman"
OPENMRS_PASS="Admin123"

FORWARDER_PROCEDURE_PORT=8011